{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { Text, Button, Card, HelperText } from 'react-native-paper';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { getMedicineById, addMedicine, updateMedicine, deleteMedicine } from \"../../database/repositories/MedicineRepository\";\nimport LoadingScreen from \"../../components/LoadingScreen\";\nimport ErrorScreen from \"../../components/ErrorScreen\";\nimport ConfirmationDialog from \"../../components/ConfirmationDialog\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MedicineFormScreen = function MedicineFormScreen() {\n  var navigation = useNavigation();\n  var route = useRoute();\n  var _ref = route.params || {},\n    medicineId = _ref.medicineId;\n  var isEditMode = !!medicineId;\n  var _useState = useState(isEditMode),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    formSubmitting = _useState6[0],\n    setFormSubmitting = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    confirmDeleteVisible = _useState8[0],\n    setConfirmDeleteVisible = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    name = _useState10[0],\n    setName = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    activeIngredient = _useState12[0],\n    setActiveIngredient = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    manufacturer = _useState14[0],\n    setManufacturer = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    dosage = _useState16[0],\n    setDosage = _useState16[1];\n  var _useState17 = useState(''),\n    _useState18 = _slicedToArray(_useState17, 2),\n    instructions = _useState18[0],\n    setInstructions = _useState18[1];\n  var _useState19 = useState({}),\n    _useState20 = _slicedToArray(_useState19, 2),\n    errors = _useState20[0],\n    setErrors = _useState20[1];\n  useEffect(function () {\n    var loadMedicine = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        if (!isEditMode) return;\n        try {\n          setLoading(true);\n          var medicine = yield getMedicineById(medicineId);\n          if (!medicine) {\n            throw new Error('Лекарство не найдено');\n          }\n          setName(medicine.name);\n          setActiveIngredient(medicine.activeIngredient || '');\n          setManufacturer(medicine.manufacturer || '');\n          setDosage(medicine.dosage || '');\n          setInstructions(medicine.instructions || '');\n        } catch (err) {\n          setError('Не удалось загрузить данные лекарства');\n          console.error(err);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function loadMedicine() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadMedicine();\n  }, [isEditMode, medicineId]);\n  var validateForm = function validateForm() {\n    var newErrors = {};\n    if (!name.trim()) {\n      newErrors.name = 'Название лекарства обязательно';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  var handleSave = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      Keyboard.dismiss();\n      if (!validateForm()) {\n        return;\n      }\n      try {\n        setFormSubmitting(true);\n        var medicineData = {\n          name: name,\n          activeIngredient: activeIngredient || undefined,\n          manufacturer: manufacturer || undefined,\n          dosage: dosage || undefined,\n          instructions: instructions || undefined,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        };\n        if (isEditMode) {\n          yield updateMedicine(_objectSpread(_objectSpread({}, medicineData), {}, {\n            id: medicineId\n          }));\n        } else {\n          yield addMedicine(medicineData);\n        }\n        navigation.goBack();\n      } catch (err) {\n        Alert.alert('Ошибка', isEditMode ? 'Не удалось обновить данные лекарства' : 'Не удалось добавить новое лекарство');\n        console.error(err);\n      } finally {\n        setFormSubmitting(false);\n      }\n    });\n    return function handleSave() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleDelete = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        yield deleteMedicine(medicineId);\n        navigation.goBack();\n      } catch (error) {\n        Alert.alert('Ошибка', 'Не удалось удалить лекарство');\n      }\n    });\n    return function handleDelete() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  if (loading) {\n    return _jsx(LoadingScreen, {\n      message: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n    });\n  }\n  if (error) {\n    return _jsx(ErrorScreen, {\n      message: error,\n      onRetry: function onRetry() {\n        return navigation.goBack();\n      }\n    });\n  }\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    children: [_jsx(Card, {\n      style: styles.card,\n      children: _jsxs(Card.Content, {\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u043B\\u0435\\u043A\\u0430\\u0440\\u0441\\u0442\\u0432\\u0435\"\n        }), _jsxs(View, {\n          style: styles.formGroup,\n          children: [_jsxs(Text, {\n            style: styles.label,\n            children: [\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \", _jsx(Text, {\n              style: styles.required,\n              children: \"*\"\n            })]\n          }), _jsx(TextInput, {\n            style: [styles.textInput, errors.name && styles.inputError],\n            value: name,\n            onChangeText: setName,\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043B\\u0435\\u043A\\u0430\\u0440\\u0441\\u0442\\u0432\\u0430\"\n          }), errors.name && _jsx(HelperText, {\n            type: \"error\",\n            visible: !!errors.name,\n            children: errors.name\n          })]\n        }), _jsxs(View, {\n          style: styles.formGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\\u0435 \\u0432\\u0435\\u0449\\u0435\\u0441\\u0442\\u0432\\u043E\"\n          }), _jsx(TextInput, {\n            style: styles.textInput,\n            value: activeIngredient,\n            onChangeText: setActiveIngredient,\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\\u0435 \\u0432\\u0435\\u0449\\u0435\\u0441\\u0442\\u0432\\u043E\"\n          })]\n        }), _jsxs(View, {\n          style: styles.formGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"\\u041F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C\"\n          }), _jsx(TextInput, {\n            style: styles.textInput,\n            value: manufacturer,\n            onChangeText: setManufacturer,\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044F\"\n          })]\n        }), _jsxs(View, {\n          style: styles.formGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"\\u0414\\u043E\\u0437\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"\n          }), _jsx(TextInput, {\n            style: styles.textInput,\n            value: dosage,\n            onChangeText: setDosage,\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u043E\\u0437\\u0438\\u0440\\u043E\\u0432\\u043A\\u0443\"\n          })]\n        }), _jsxs(View, {\n          style: styles.formGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"\\u0418\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u044F \\u043F\\u043E \\u043F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044E\"\n          }), _jsx(TextInput, {\n            style: [styles.textInput, styles.textArea],\n            value: instructions,\n            onChangeText: setInstructions,\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u044E \\u043F\\u043E \\u043F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044E\",\n            multiline: true,\n            numberOfLines: 4\n          })]\n        })]\n      })\n    }), _jsxs(View, {\n      style: styles.buttonsContainer,\n      children: [_jsx(Button, {\n        mode: \"contained\",\n        onPress: handleSave,\n        loading: formSubmitting,\n        disabled: formSubmitting,\n        style: styles.saveButton,\n        children: isEditMode ? 'Сохранить изменения' : 'Добавить лекарство'\n      }), isEditMode && _jsx(Button, {\n        mode: \"contained\",\n        buttonColor: \"#D32F2F\",\n        onPress: function onPress() {\n          return setConfirmDeleteVisible(true);\n        },\n        style: styles.deleteButton,\n        disabled: formSubmitting,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043B\\u0435\\u043A\\u0430\\u0440\\u0441\\u0442\\u0432\\u043E\"\n      }), _jsx(Button, {\n        mode: \"outlined\",\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        style: styles.cancelButton,\n        disabled: formSubmitting,\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      })]\n    }), _jsx(ConfirmationDialog, {\n      visible: confirmDeleteVisible,\n      title: \"\\u0423\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043B\\u0435\\u043A\\u0430\\u0440\\u0441\\u0442\\u0432\\u0430\",\n      message: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043B\\u0435\\u043A\\u0430\\u0440\\u0441\\u0442\\u0432\\u043E \\\"\" + name + \"\\\"? \\u042D\\u0442\\u043E \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435 \\u043D\\u0435\\u043B\\u044C\\u0437\\u044F \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C.\",\n      confirmText: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",\n      cancelText: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\",\n      onConfirm: handleDelete,\n      onCancel: function onCancel() {\n        return setConfirmDeleteVisible(false);\n      },\n      destructive: true\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F5F5F5'\n  },\n  card: {\n    margin: 16,\n    marginBottom: 8,\n    elevation: 2\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    color: '#424242'\n  },\n  formGroup: {\n    marginBottom: 16\n  },\n  label: {\n    fontSize: 16,\n    marginBottom: 8,\n    color: '#424242'\n  },\n  required: {\n    color: '#D32F2F'\n  },\n  textInput: {\n    borderWidth: 1,\n    borderColor: '#BDBDBD',\n    borderRadius: 4,\n    padding: 10,\n    fontSize: 16,\n    backgroundColor: '#FFFFFF'\n  },\n  inputError: {\n    borderColor: '#D32F2F'\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top'\n  },\n  buttonsContainer: {\n    padding: 16,\n    marginBottom: 24\n  },\n  saveButton: {\n    marginBottom: 8\n  },\n  deleteButton: {\n    marginBottom: 8\n  },\n  cancelButton: {\n    borderColor: '#BDBDBD'\n  }\n});\nexport default MedicineFormScreen;","map":{"version":3,"names":["React","useState","useEffect","View","ScrollView","StyleSheet","Alert","Keyboard","TextInput","Text","Button","Card","HelperText","useNavigation","useRoute","getMedicineById","addMedicine","updateMedicine","deleteMedicine","LoadingScreen","ErrorScreen","ConfirmationDialog","jsx","_jsx","jsxs","_jsxs","MedicineFormScreen","navigation","route","_ref","params","medicineId","isEditMode","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","error","setError","_useState5","_useState6","formSubmitting","setFormSubmitting","_useState7","_useState8","confirmDeleteVisible","setConfirmDeleteVisible","_useState9","_useState10","name","setName","_useState11","_useState12","activeIngredient","setActiveIngredient","_useState13","_useState14","manufacturer","setManufacturer","_useState15","_useState16","dosage","setDosage","_useState17","_useState18","instructions","setInstructions","_useState19","_useState20","errors","setErrors","loadMedicine","_ref2","_asyncToGenerator","medicine","Error","err","console","apply","arguments","validateForm","newErrors","trim","Object","keys","length","handleSave","_ref3","dismiss","medicineData","undefined","createdAt","Date","toISOString","updatedAt","_objectSpread","id","goBack","alert","handleDelete","_ref4","message","onRetry","style","styles","container","children","card","Content","sectionTitle","formGroup","label","required","textInput","inputError","value","onChangeText","placeholder","type","visible","textArea","multiline","numberOfLines","buttonsContainer","mode","onPress","disabled","saveButton","buttonColor","deleteButton","cancelButton","title","confirmText","cancelText","onConfirm","onCancel","destructive","create","flex","backgroundColor","margin","marginBottom","elevation","fontSize","fontWeight","color","borderWidth","borderColor","borderRadius","padding","height","textAlignVertical"],"sources":["C:/vet-assistant/src/screens/directories/MedicineFormScreen.tsx"],"sourcesContent":["// src/screens/directories/MedicineFormScreen.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { View, ScrollView, StyleSheet, Alert, Keyboard, TextInput } from 'react-native';\r\nimport { Text, Button, Card, HelperText } from 'react-native-paper';\r\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { Medicine } from '../../types';\r\nimport { getMedicineById, addMedicine, updateMedicine, deleteMedicine } from '../../database/repositories/MedicineRepository';\r\nimport { DirectoriesStackParamList } from '../../navigation/MainNavigator';\r\nimport LoadingScreen from '../../components/LoadingScreen';\r\nimport ErrorScreen from '../../components/ErrorScreen';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\n\r\ntype MedicineFormScreenRouteProp = RouteProp<DirectoriesStackParamList, 'MedicineForm'>;\r\ntype MedicineFormScreenNavigationProp = NativeStackNavigationProp<DirectoriesStackParamList, 'MedicineForm'>;\r\n\r\nconst MedicineFormScreen: React.FC = () => {\r\n  const navigation = useNavigation<MedicineFormScreenNavigationProp>();\r\n  const route = useRoute<MedicineFormScreenRouteProp>();\r\n  const { medicineId } = route.params || {};\r\n  const isEditMode = !!medicineId;\r\n  \r\n  const [loading, setLoading] = useState(isEditMode);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [formSubmitting, setFormSubmitting] = useState(false);\r\n  const [confirmDeleteVisible, setConfirmDeleteVisible] = useState(false);\r\n  \r\n  // Форма лекарства\r\n  const [name, setName] = useState('');\r\n  const [activeIngredient, setActiveIngredient] = useState('');\r\n  const [manufacturer, setManufacturer] = useState('');\r\n  const [dosage, setDosage] = useState('');\r\n  const [instructions, setInstructions] = useState('');\r\n  \r\n  // Валидация\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  \r\n  // Загрузка данных лекарства в режиме редактирования\r\n  useEffect(() => {\r\n    const loadMedicine = async () => {\r\n      if (!isEditMode) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        \r\n        const medicine = await getMedicineById(medicineId);\r\n        if (!medicine) {\r\n          throw new Error('Лекарство не найдено');\r\n        }\r\n        \r\n        setName(medicine.name);\r\n        setActiveIngredient(medicine.activeIngredient || '');\r\n        setManufacturer(medicine.manufacturer || '');\r\n        setDosage(medicine.dosage || '');\r\n        setInstructions(medicine.instructions || '');\r\n      } catch (err) {\r\n        setError('Не удалось загрузить данные лекарства');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    loadMedicine();\r\n  }, [isEditMode, medicineId]);\r\n  \r\n  // Валидация формы\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n    \r\n    if (!name.trim()) {\r\n      newErrors.name = 'Название лекарства обязательно';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n  \r\n  // Сохранение лекарства\r\n  const handleSave = async () => {\r\n    Keyboard.dismiss();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setFormSubmitting(true);\r\n      \r\n      const medicineData: Omit<Medicine, 'id'> = {\r\n        name,\r\n        activeIngredient: activeIngredient || undefined,\r\n        manufacturer: manufacturer || undefined,\r\n        dosage: dosage || undefined,\r\n        instructions: instructions || undefined,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n      };\r\n      \r\n      if (isEditMode) {\r\n        await updateMedicine({ ...medicineData, id: medicineId });\r\n      } else {\r\n        await addMedicine(medicineData);\r\n      }\r\n      \r\n      navigation.goBack();\r\n    } catch (err) {\r\n      Alert.alert(\r\n        'Ошибка',\r\n        isEditMode\r\n          ? 'Не удалось обновить данные лекарства'\r\n          : 'Не удалось добавить новое лекарство'\r\n      );\r\n      console.error(err);\r\n    } finally {\r\n      setFormSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  // Удаление лекарства\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteMedicine(medicineId);\r\n      navigation.goBack();\r\n    } catch (error) {\r\n      Alert.alert('Ошибка', 'Не удалось удалить лекарство');\r\n    }\r\n  };\r\n  \r\n  if (loading) {\r\n    return <LoadingScreen message=\"Загрузка данных...\" />;\r\n  }\r\n  \r\n  if (error) {\r\n    return <ErrorScreen message={error} onRetry={() => navigation.goBack()} />;\r\n  }\r\n  \r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <Card style={styles.card}>\r\n        <Card.Content>\r\n          <Text style={styles.sectionTitle}>Информация о лекарстве</Text>\r\n          \r\n          <View style={styles.formGroup}>\r\n            <Text style={styles.label}>\r\n              Название <Text style={styles.required}>*</Text>\r\n            </Text>\r\n            <TextInput\r\n              style={[styles.textInput, errors.name && styles.inputError]}\r\n              value={name}\r\n              onChangeText={setName}\r\n              placeholder=\"Введите название лекарства\"\r\n            />\r\n            {errors.name && (\r\n              <HelperText type=\"error\" visible={!!errors.name}>\r\n                {errors.name}\r\n              </HelperText>\r\n            )}\r\n          </View>\r\n          \r\n          <View style={styles.formGroup}>\r\n            <Text style={styles.label}>Активное вещество</Text>\r\n            <TextInput\r\n              style={styles.textInput}\r\n              value={activeIngredient}\r\n              onChangeText={setActiveIngredient}\r\n              placeholder=\"Введите активное вещество\"\r\n            />\r\n          </View>\r\n          \r\n          <View style={styles.formGroup}>\r\n            <Text style={styles.label}>Производитель</Text>\r\n            <TextInput\r\n              style={styles.textInput}\r\n              value={manufacturer}\r\n              onChangeText={setManufacturer}\r\n              placeholder=\"Введите производителя\"\r\n            />\r\n          </View>\r\n          \r\n          <View style={styles.formGroup}>\r\n            <Text style={styles.label}>Дозировка</Text>\r\n            <TextInput\r\n              style={styles.textInput}\r\n              value={dosage}\r\n              onChangeText={setDosage}\r\n              placeholder=\"Введите дозировку\"\r\n            />\r\n          </View>\r\n          \r\n          <View style={styles.formGroup}>\r\n            <Text style={styles.label}>Инструкция по применению</Text>\r\n            <TextInput\r\n              style={[styles.textInput, styles.textArea]}\r\n              value={instructions}\r\n              onChangeText={setInstructions}\r\n              placeholder=\"Введите инструкцию по применению\"\r\n              multiline\r\n              numberOfLines={4}\r\n            />\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n      \r\n      <View style={styles.buttonsContainer}>\r\n        <Button\r\n          mode=\"contained\"\r\n          onPress={handleSave}\r\n          loading={formSubmitting}\r\n          disabled={formSubmitting}\r\n          style={styles.saveButton}\r\n        >\r\n          {isEditMode ? 'Сохранить изменения' : 'Добавить лекарство'}\r\n        </Button>\r\n        \r\n        {isEditMode && (\r\n          <Button\r\n            mode=\"contained\"\r\n            buttonColor=\"#D32F2F\"\r\n            onPress={() => setConfirmDeleteVisible(true)}\r\n            style={styles.deleteButton}\r\n            disabled={formSubmitting}\r\n          >\r\n            Удалить лекарство\r\n          </Button>\r\n        )}\r\n        \r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={() => navigation.goBack()}\r\n          style={styles.cancelButton}\r\n          disabled={formSubmitting}\r\n        >\r\n          Отмена\r\n        </Button>\r\n      </View>\r\n      \r\n      <ConfirmationDialog\r\n        visible={confirmDeleteVisible}\r\n        title=\"Удаление лекарства\"\r\n        message={`Вы уверены, что хотите удалить лекарство \"${name}\"? Это действие нельзя будет отменить.`}\r\n        confirmText=\"Удалить\"\r\n        cancelText=\"Отмена\"\r\n        onConfirm={handleDelete}\r\n        onCancel={() => setConfirmDeleteVisible(false)}\r\n        destructive\r\n      />\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#F5F5F5',\r\n  },\r\n  card: {\r\n    margin: 16,\r\n    marginBottom: 8,\r\n    elevation: 2,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 16,\r\n    color: '#424242',\r\n  },\r\n  formGroup: {\r\n    marginBottom: 16,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    marginBottom: 8,\r\n    color: '#424242',\r\n  },\r\n  required: {\r\n    color: '#D32F2F',\r\n  },\r\n  textInput: {\r\n    borderWidth: 1,\r\n    borderColor: '#BDBDBD',\r\n    borderRadius: 4,\r\n    padding: 10,\r\n    fontSize: 16,\r\n    backgroundColor: '#FFFFFF',\r\n  },\r\n  inputError: {\r\n    borderColor: '#D32F2F',\r\n  },\r\n  textArea: {\r\n    height: 100,\r\n    textAlignVertical: 'top',\r\n  },\r\n  buttonsContainer: {\r\n    padding: 16,\r\n    marginBottom: 24,\r\n  },\r\n  saveButton: {\r\n    marginBottom: 8,\r\n  },\r\n  deleteButton: {\r\n    marginBottom: 8,\r\n  },\r\n  cancelButton: {\r\n    borderColor: '#BDBDBD',\r\n  },\r\n});\r\n\r\nexport default MedicineFormScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}